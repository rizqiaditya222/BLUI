<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/kotlin/blui/presentation/home/HomeScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/kotlin/blui/presentation/home/HomeScreen.kt" />
              <option name="originalContent" value="package com.kotlin.blui.presentation.home&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.KeyboardArrowLeft&#10;import androidx.compose.material.icons.automirrored.filled.KeyboardArrowRight&#10;import androidx.compose.material.icons.filled.Refresh&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.core.graphics.toColorInt&#10;import com.kotlin.blui.presentation.component.PieChart&#10;import com.kotlin.blui.presentation.component.PieChartData&#10;import java.text.NumberFormat&#10;import java.util.Locale&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun HomeScreen(&#10;    viewModel: HomeScreenViewModel,&#10;    onNavigateToTransaction: () -&gt; Unit = {}&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(&quot;Ringkasan Keuangan&quot;) },&#10;                actions = {&#10;                    IconButton(onClick = { viewModel.refresh() }) {&#10;                        Icon(Icons.Default.Refresh, contentDescription = &quot;Refresh&quot;)&#10;                    }&#10;                }&#10;            )&#10;        },&#10;        floatingActionButton = {&#10;            FloatingActionButton(&#10;                onClick = onNavigateToTransaction,&#10;                containerColor = MaterialTheme.colorScheme.primary&#10;            ) {&#10;                Text(&quot;+&quot;, fontSize = 24.sp, fontWeight = FontWeight.Bold)&#10;            }&#10;        }&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;        ) {&#10;            if (uiState.isLoading) {&#10;                CircularProgressIndicator(&#10;                    modifier = Modifier.align(Alignment.Center)&#10;                )&#10;            } else if (uiState.errorMessage != null) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .align(Alignment.Center)&#10;                        .padding(16.dp),&#10;                    horizontalAlignment = Alignment.CenterHorizontally&#10;                ) {&#10;                    Text(&#10;                        text = uiState.errorMessage ?: &quot;&quot;,&#10;                        color = MaterialTheme.colorScheme.error,&#10;                        textAlign = TextAlign.Center&#10;                    )&#10;                    Spacer(modifier = Modifier.height(16.dp))&#10;                    Button(onClick = { viewModel.refresh() }) {&#10;                        Text(&quot;Coba Lagi&quot;)&#10;                    }&#10;                }&#10;            } else {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxSize()&#10;                        .verticalScroll(rememberScrollState())&#10;                        .padding(16.dp),&#10;                    verticalArrangement = Arrangement.spacedBy(16.dp)&#10;                ) {&#10;                    // Month Navigation&#10;                    MonthNavigator(&#10;                        month = uiState.selectedMonth,&#10;                        year = uiState.selectedYear,&#10;                        onPreviousMonth = { viewModel.previousMonth() },&#10;                        onNextMonth = { viewModel.nextMonth() }&#10;                    )&#10;&#10;                    // Balance Summary Card&#10;                    BalanceCard(&#10;                        balance = uiState.currentSummary?.balance ?: 0.0,&#10;                        totalIncome = uiState.currentSummary?.totalIncome ?: 0.0,&#10;                        totalExpense = uiState.currentSummary?.totalExpense ?: 0.0&#10;                    )&#10;&#10;                    // Expense Breakdown&#10;                    if (uiState.currentSummary?.expenseByCategory?.isNotEmpty() == true) {&#10;                        ExpenseBreakdownCard(&#10;                            expenseByCategory = uiState.currentSummary?.expenseByCategory ?: emptyList()&#10;                        )&#10;                    }&#10;&#10;                    // Income Breakdown&#10;                    if (uiState.currentSummary?.incomeByCategory?.isNotEmpty() == true) {&#10;                        IncomeBreakdownCard(&#10;                            incomeByCategory = uiState.currentSummary?.incomeByCategory ?: emptyList()&#10;                        )&#10;                    }&#10;&#10;                    // Empty state&#10;                    if (uiState.currentSummary?.expenseByCategory?.isEmpty() == true &amp;&amp;&#10;                        uiState.currentSummary?.incomeByCategory?.isEmpty() == true) {&#10;                        Card(&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            colors = CardDefaults.cardColors(&#10;                                containerColor = MaterialTheme.colorScheme.surfaceVariant&#10;                            )&#10;                        ) {&#10;                            Column(&#10;                                modifier = Modifier&#10;                                    .fillMaxWidth()&#10;                                    .padding(32.dp),&#10;                                horizontalAlignment = Alignment.CenterHorizontally&#10;                            ) {&#10;                                Text(&#10;                                    text = &quot;Belum ada transaksi&quot;,&#10;                                    fontSize = 16.sp,&#10;                                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                                )&#10;                                Spacer(modifier = Modifier.height(8.dp))&#10;                                Text(&#10;                                    text = &quot;Tambahkan transaksi pertama Anda&quot;,&#10;                                    fontSize = 14.sp,&#10;                                    color = MaterialTheme.colorScheme.onSurfaceVariant&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(80.dp))&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun MonthNavigator(&#10;    month: Int,&#10;    year: Int,&#10;    onPreviousMonth: () -&gt; Unit,&#10;    onNextMonth: () -&gt; Unit&#10;) {&#10;    val monthNames = listOf(&#10;        &quot;Januari&quot;, &quot;Februari&quot;, &quot;Maret&quot;, &quot;April&quot;, &quot;Mei&quot;, &quot;Juni&quot;,&#10;        &quot;Juli&quot;, &quot;Agustus&quot;, &quot;September&quot;, &quot;Oktober&quot;, &quot;November&quot;, &quot;Desember&quot;&#10;    )&#10;&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.primaryContainer&#10;        )&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(8.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            IconButton(onClick = onPreviousMonth) {&#10;                Icon(Icons.AutoMirrored.Filled.KeyboardArrowLeft, contentDescription = &quot;Bulan Sebelumnya&quot;)&#10;            }&#10;&#10;            Text(&#10;                text = &quot;${monthNames[month - 1]} $year&quot;,&#10;                fontSize = 18.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = MaterialTheme.colorScheme.onPrimaryContainer&#10;            )&#10;&#10;            IconButton(onClick = onNextMonth) {&#10;                Icon(Icons.AutoMirrored.Filled.KeyboardArrowRight, contentDescription = &quot;Bulan Berikutnya&quot;)&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun BalanceCard(&#10;    balance: Double,&#10;    totalIncome: Double,&#10;    totalExpense: Double&#10;) {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = MaterialTheme.colorScheme.primary&#10;        )&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(20.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally&#10;        ) {&#10;            Text(&#10;                text = &quot;Saldo&quot;,&#10;                fontSize = 14.sp,&#10;                color = MaterialTheme.colorScheme.onPrimary.copy(alpha = 0.8f)&#10;            )&#10;            Spacer(modifier = Modifier.height(8.dp))&#10;            Text(&#10;                text = formatCurrency(balance),&#10;                fontSize = 32.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = MaterialTheme.colorScheme.onPrimary&#10;            )&#10;            Spacer(modifier = Modifier.height(20.dp))&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceEvenly&#10;            ) {&#10;                Column(horizontalAlignment = Alignment.CenterHorizontally) {&#10;                    Text(&#10;                        text = &quot;Pemasukan&quot;,&#10;                        fontSize = 12.sp,&#10;                        color = MaterialTheme.colorScheme.onPrimary.copy(alpha = 0.8f)&#10;                    )&#10;                    Spacer(modifier = Modifier.height(4.dp))&#10;                    Text(&#10;                        text = formatCurrency(totalIncome),&#10;                        fontSize = 16.sp,&#10;                        fontWeight = FontWeight.SemiBold,&#10;                        color = Color(0xFF4CAF50)&#10;                    )&#10;                }&#10;&#10;                Column(horizontalAlignment = Alignment.CenterHorizontally) {&#10;                    Text(&#10;                        text = &quot;Pengeluaran&quot;,&#10;                        fontSize = 12.sp,&#10;                        color = MaterialTheme.colorScheme.onPrimary.copy(alpha = 0.8f)&#10;                    )&#10;                    Spacer(modifier = Modifier.height(4.dp))&#10;                    Text(&#10;                        text = formatCurrency(totalExpense),&#10;                        fontSize = 16.sp,&#10;                        fontWeight = FontWeight.SemiBold,&#10;                        color = Color(0xFFF44336)&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ExpenseBreakdownCard(&#10;    expenseByCategory: List&lt;com.kotlin.blui.domain.model.CategorySummary&gt;&#10;) {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth()&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp)&#10;        ) {&#10;            Text(&#10;                text = &quot;Pengeluaran per Kategori&quot;,&#10;                fontSize = 18.sp,&#10;                fontWeight = FontWeight.Bold&#10;            )&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            val pieChartData = expenseByCategory.map { category -&gt;&#10;                PieChartData(&#10;                    categoryName = category.categoryName,&#10;                    amount = category.total,&#10;                    color = parseColor(category.categoryColor)&#10;                )&#10;            }&#10;&#10;            PieChart(&#10;                data = pieChartData,&#10;                modifier = Modifier.fillMaxWidth()&#10;            )&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            expenseByCategory.forEach { category -&gt;&#10;                CategoryItem(category = category)&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun IncomeBreakdownCard(&#10;    incomeByCategory: List&lt;com.kotlin.blui.domain.model.CategorySummary&gt;&#10;) {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth()&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp)&#10;        ) {&#10;            Text(&#10;                text = &quot;Pemasukan per Kategori&quot;,&#10;                fontSize = 18.sp,&#10;                fontWeight = FontWeight.Bold&#10;            )&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            val pieChartData = incomeByCategory.map { category -&gt;&#10;                PieChartData(&#10;                    categoryName = category.categoryName,&#10;                    amount = category.total,&#10;                    color = parseColor(category.categoryColor)&#10;                )&#10;            }&#10;&#10;            PieChart(&#10;                data = pieChartData,&#10;                modifier = Modifier.fillMaxWidth()&#10;            )&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            incomeByCategory.forEach { category -&gt;&#10;                CategoryItem(category = category)&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun CategoryItem(&#10;    category: com.kotlin.blui.domain.model.CategorySummary&#10;) {&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .background(&#10;                color = parseColor(category.categoryColor).copy(alpha = 0.1f),&#10;                shape = RoundedCornerShape(8.dp)&#10;            )&#10;            .padding(12.dp),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Row(&#10;            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .size(40.dp)&#10;                    .background(&#10;                        color = parseColor(category.categoryColor),&#10;                        shape = RoundedCornerShape(8.dp)&#10;                    ),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Text(&#10;                    text = category.categoryIcon,&#10;                    fontSize = 20.sp&#10;                )&#10;            }&#10;&#10;            Column {&#10;                Text(&#10;                    text = category.categoryName,&#10;                    fontSize = 14.sp,&#10;                    fontWeight = FontWeight.Medium&#10;                )&#10;                Text(&#10;                    text = &quot;${String.format(Locale.US, &quot;%.1f&quot;, category.percentage)}%&quot;,&#10;                    fontSize = 12.sp,&#10;                    color = Color.Gray&#10;                )&#10;            }&#10;        }&#10;&#10;        Text(&#10;            text = formatCurrency(category.total),&#10;            fontSize = 14.sp,&#10;            fontWeight = FontWeight.Bold&#10;        )&#10;    }&#10;}&#10;&#10;private fun parseColor(colorString: String): Color {&#10;    return try {&#10;        Color(colorString.toColorInt())&#10;    } catch (_: Exception) {&#10;        Color.Gray&#10;    }&#10;}&#10;&#10;private fun formatCurrency(amount: Double): String {&#10;    val format = NumberFormat.getCurrencyInstance(Locale(&quot;id&quot;, &quot;ID&quot;))&#10;    return format.format(amount)&#10;}" />
              <option name="updatedContent" value="package com.kotlin.blui.presentation.home&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.interaction.MutableInteractionSource&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Add&#10;import androidx.compose.material.icons.filled.ArrowDownward&#10;import androidx.compose.material.icons.filled.ArrowUpward&#10;import androidx.compose.material.icons.filled.CalendarToday&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.derivedStateOf&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Brush&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.core.graphics.toColorInt&#10;import com.kotlin.blui.presentation.component.MonthYearPickerDialog&#10;import com.kotlin.blui.presentation.component.PieChart&#10;import com.kotlin.blui.presentation.component.PieChartData&#10;import com.kotlin.blui.presentation.component.TransactionFilter&#10;import com.kotlin.blui.ui.theme.BlueLight&#10;import com.kotlin.blui.ui.theme.BlueLightActive&#10;import java.text.NumberFormat&#10;import java.util.Calendar&#10;import java.util.Locale&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun HomeScreen(&#10;    viewModel: HomeScreenViewModel,&#10;    onNavigateToTransaction: () -&gt; Unit = {}&#10;) {&#10;    val uiState by viewModel.uiState.collectAsState()&#10;&#10;    val monthNames = listOf(&#10;        &quot;Januari&quot;, &quot;Februari&quot;, &quot;Maret&quot;, &quot;April&quot;, &quot;Mei&quot;, &quot;Juni&quot;,&#10;        &quot;Juli&quot;, &quot;Agustus&quot;, &quot;September&quot;, &quot;Oktober&quot;, &quot;November&quot;, &quot;Desember&quot;&#10;    )&#10;    &#10;    var selectedDate by remember { &#10;        mutableStateOf(&quot;${monthNames[uiState.selectedMonth - 1]} ${uiState.selectedYear}&quot;) &#10;    }&#10;    var selectedType by remember { mutableStateOf(&quot;Expense&quot;) }&#10;    var showMonthYearPicker by remember { mutableStateOf(false) }&#10;&#10;    val calendar = remember { Calendar.getInstance() }&#10;    val pickerYear = remember { mutableStateOf(uiState.selectedYear) }&#10;    val pickerMonthIndex = remember { mutableStateOf(uiState.selectedMonth - 1) }&#10;&#10;    // Update selectedDate when month/year changes&#10;    selectedDate = &quot;${monthNames[uiState.selectedMonth - 1]} ${uiState.selectedYear}&quot;&#10;&#10;    val gradient = Brush.horizontalGradient(&#10;        colors = listOf(&#10;            MaterialTheme.colorScheme.primary,&#10;            BlueLightActive&#10;        )&#10;    )&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .verticalScroll(rememberScrollState())&#10;            .padding(16.dp),&#10;        verticalArrangement = Arrangement.spacedBy(16.dp)&#10;    ) {&#10;        // Greeting&#10;        Text(&#10;            text = &quot;Halo, Elgin!&quot;,&#10;            fontSize = 24.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            modifier = Modifier.padding(top = 16.dp)&#10;        )&#10;&#10;        // Balance Card with gradient&#10;        Card(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .height(160.dp),&#10;            shape = RoundedCornerShape(16.dp),&#10;            colors = CardDefaults.cardColors(&#10;                containerColor = Color.Transparent&#10;            )&#10;        ) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .background(gradient)&#10;                    .padding(20.dp)&#10;            ) {&#10;                Column {&#10;                    Row(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        horizontalArrangement = Arrangement.SpaceBetween,&#10;                        verticalAlignment = Alignment.CenterVertically&#10;                    ) {&#10;                        Text(&#10;                            text = &quot;Balance&quot;,&#10;                            fontSize = 14.sp,&#10;                            color = Color.White.copy(alpha = 0.8f)&#10;                        )&#10;                        IconButton(&#10;                            onClick = onNavigateToTransaction,&#10;                            modifier = Modifier&#10;                                .size(40.dp)&#10;                                .background(Color.White, shape = RoundedCornerShape(12.dp))&#10;                        ) {&#10;                            Icon(&#10;                                Icons.Default.Add,&#10;                                contentDescription = &quot;Add Transaction&quot;,&#10;                                tint = MaterialTheme.colorScheme.primary&#10;                            )&#10;                        }&#10;                    }&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;                    Text(&#10;                        text = formatCurrency(uiState.currentSummary?.balance ?: 0.0),&#10;                        fontSize = 32.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        color = Color.White&#10;                    )&#10;                }&#10;            }&#10;        }&#10;&#10;        // Income and Expense Cards&#10;        Row(&#10;            modifier = Modifier.fillMaxWidth(),&#10;            horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;        ) {&#10;            // Income Card&#10;            Card(&#10;                modifier = Modifier&#10;                    .weight(1f)&#10;                    .height(100.dp),&#10;                shape = RoundedCornerShape(16.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = MaterialTheme.colorScheme.primary&#10;                )&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxSize()&#10;                        .padding(16.dp),&#10;                    verticalArrangement = Arrangement.SpaceBetween&#10;                ) {&#10;                    Row(&#10;                        verticalAlignment = Alignment.CenterVertically,&#10;                        horizontalArrangement = Arrangement.spacedBy(4.dp)&#10;                    ) {&#10;                        Text(&#10;                            text = &quot;Income&quot;,&#10;                            fontSize = 14.sp,&#10;                            color = Color.White.copy(alpha = 0.8f)&#10;                        )&#10;                        Icon(&#10;                            Icons.Default.ArrowDownward,&#10;                            contentDescription = null,&#10;                            tint = Color(0xFF4CAF50),&#10;                            modifier = Modifier.size(16.dp)&#10;                        )&#10;                    }&#10;                    Text(&#10;                        text = formatCurrency(uiState.currentSummary?.totalIncome ?: 0.0),&#10;                        fontSize = 18.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        color = Color.White&#10;                    )&#10;                }&#10;            }&#10;&#10;            // Expense Card&#10;            Card(&#10;                modifier = Modifier&#10;                    .weight(1f)&#10;                    .height(100.dp),&#10;                shape = RoundedCornerShape(16.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = MaterialTheme.colorScheme.primary&#10;                )&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxSize()&#10;                        .padding(16.dp),&#10;                    verticalArrangement = Arrangement.SpaceBetween&#10;                ) {&#10;                    Row(&#10;                        verticalAlignment = Alignment.CenterVertically,&#10;                        horizontalArrangement = Arrangement.spacedBy(4.dp)&#10;                    ) {&#10;                        Text(&#10;                            text = &quot;Expense&quot;,&#10;                            fontSize = 14.sp,&#10;                            color = Color.White.copy(alpha = 0.8f)&#10;                        )&#10;                        Icon(&#10;                            Icons.Default.ArrowUpward,&#10;                            contentDescription = null,&#10;                            tint = Color(0xFFF44336),&#10;                            modifier = Modifier.size(16.dp)&#10;                        )&#10;                    }&#10;                    Text(&#10;                        text = formatCurrency(uiState.currentSummary?.totalExpense ?: 0.0),&#10;                        fontSize = 18.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        color = Color.White&#10;                    )&#10;                }&#10;            }&#10;        }&#10;&#10;        // Month Selector and Type Filter&#10;        Row(&#10;            modifier = Modifier.fillMaxWidth(),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            // Month Selector&#10;            Row(&#10;                modifier = Modifier&#10;                    .clip(RoundedCornerShape(12.dp))&#10;                    .background(MaterialTheme.colorScheme.surfaceVariant)&#10;                    .clickable { showMonthYearPicker = true }&#10;                    .padding(horizontal = 16.dp, vertical = 10.dp),&#10;                horizontalArrangement = Arrangement.spacedBy(8.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Text(&#10;                    text = selectedDate,&#10;                    fontSize = 14.sp,&#10;                    fontWeight = FontWeight.Medium&#10;                )&#10;                Icon(&#10;                    Icons.Default.CalendarToday,&#10;                    contentDescription = &quot;Select Date&quot;,&#10;                    modifier = Modifier.size(16.dp)&#10;                )&#10;            }&#10;&#10;            // Type Filter (Income/Expense)&#10;            TransactionFilter(&#10;                selectedType = selectedType,&#10;                onTypeSelected = { selectedType = it }&#10;            )&#10;        }&#10;&#10;        // Pie Chart Section&#10;        if (uiState.isLoading) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(200.dp),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                CircularProgressIndicator()&#10;            }&#10;        } else if (uiState.errorMessage != null) {&#10;            Card(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = MaterialTheme.colorScheme.errorContainer&#10;                )&#10;            ) {&#10;                Text(&#10;                    text = uiState.errorMessage ?: &quot;&quot;,&#10;                    color = MaterialTheme.colorScheme.onErrorContainer,&#10;                    modifier = Modifier.padding(16.dp),&#10;                    textAlign = TextAlign.Center&#10;                )&#10;            }&#10;        } else {&#10;            val categoryData = if (selectedType == &quot;Income&quot;) {&#10;                uiState.currentSummary?.incomeByCategory&#10;            } else {&#10;                uiState.currentSummary?.expenseByCategory&#10;            }&#10;&#10;            if (categoryData?.isNotEmpty() == true) {&#10;                val pieChartData = categoryData.map { category -&gt;&#10;                    PieChartData(&#10;                        categoryName = category.categoryName,&#10;                        amount = category.total,&#10;                        color = parseColor(category.categoryColor)&#10;                    )&#10;                }&#10;&#10;                Card(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    shape = RoundedCornerShape(16.dp)&#10;                ) {&#10;                    Column(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .padding(16.dp)&#10;                    ) {&#10;                        PieChart(&#10;                            data = pieChartData,&#10;                            modifier = Modifier.fillMaxWidth()&#10;                        )&#10;                    }&#10;                }&#10;            } else {&#10;                Card(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    colors = CardDefaults.cardColors(&#10;                        containerColor = MaterialTheme.colorScheme.surfaceVariant&#10;                    )&#10;                ) {&#10;                    Box(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(200.dp),&#10;                        contentAlignment = Alignment.Center&#10;                    ) {&#10;                        Text(&#10;                            text = &quot;Tidak ada data ${if (selectedType == &quot;Income&quot;) &quot;pemasukan&quot; else &quot;pengeluaran&quot;}&quot;,&#10;                            color = MaterialTheme.colorScheme.onSurfaceVariant,&#10;                            fontSize = 14.sp&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;&#10;        // Detail Section Header&#10;        Row(&#10;            modifier = Modifier.fillMaxWidth(),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Text(&#10;                text = &quot;Detail&quot;,&#10;                fontSize = 18.sp,&#10;                fontWeight = FontWeight.Bold&#10;            )&#10;            Text(&#10;                text = &quot;Lihat Semua&quot;,&#10;                fontSize = 14.sp,&#10;                color = MaterialTheme.colorScheme.primary,&#10;                fontWeight = FontWeight.Medium,&#10;                modifier = Modifier.clickable { /* Navigate to full list */ }&#10;            )&#10;        }&#10;&#10;        // Transaction List&#10;        val categoryData = if (selectedType == &quot;Income&quot;) {&#10;            uiState.currentSummary?.incomeByCategory&#10;        } else {&#10;            uiState.currentSummary?.expenseByCategory&#10;        }&#10;&#10;        if (categoryData?.isNotEmpty() == true) {&#10;            Card(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                shape = RoundedCornerShape(16.dp)&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    categoryData.take(4).forEachIndexed { index, category -&gt;&#10;                        TransactionItem(&#10;                            categoryName = category.categoryName,&#10;                            categoryIcon = category.categoryIcon,&#10;                            categoryColor = parseColor(category.categoryColor),&#10;                            amount = category.total,&#10;                            isIncome = selectedType == &quot;Income&quot;&#10;                        )&#10;                        if (index &lt; categoryData.size - 1 &amp;&amp; index &lt; 3) {&#10;                            Divider(color = MaterialTheme.colorScheme.surfaceVariant)&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        }&#10;&#10;        Spacer(modifier = Modifier.height(80.dp))&#10;    }&#10;&#10;    // Month Year Picker Dialog&#10;    if (showMonthYearPicker) {&#10;        MonthYearPickerDialog(&#10;            initialYear = pickerYear.value,&#10;            initialMonthIndex = pickerMonthIndex.value,&#10;            onDismiss = { showMonthYearPicker = false },&#10;            onConfirm = { year, monthIndex -&gt;&#10;                pickerYear.value = year&#10;                pickerMonthIndex.value = monthIndex&#10;                viewModel.onMonthChange(monthIndex + 1)&#10;                viewModel.onYearChange(year)&#10;                showMonthYearPicker = false&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun TransactionItem(&#10;    categoryName: String,&#10;    categoryIcon: String,&#10;    categoryColor: Color,&#10;    amount: Double,&#10;    isIncome: Boolean&#10;) {&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .clickable { /* Navigate to detail */ }&#10;            .padding(16.dp),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Row(&#10;            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .size(40.dp)&#10;                    .background(categoryColor, shape = RoundedCornerShape(8.dp)),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Text(&#10;                    text = categoryIcon,&#10;                    fontSize = 20.sp&#10;                )&#10;            }&#10;            Text(&#10;                text = categoryName,&#10;                fontSize = 14.sp,&#10;                fontWeight = FontWeight.Medium&#10;            )&#10;        }&#10;&#10;        Text(&#10;            text = formatCurrency(amount),&#10;            fontSize = 14.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            color = if (isIncome) Color(0xFF4CAF50) else MaterialTheme.colorScheme.onSurface&#10;        )&#10;    }&#10;}&#10;&#10;private fun parseColor(colorString: String): Color {&#10;    return try {&#10;        Color(colorString.toColorInt())&#10;    } catch (_: Exception) {&#10;        Color.Gray&#10;    }&#10;}&#10;&#10;private fun formatCurrency(amount: Double): String {&#10;    val format = NumberFormat.getCurrencyInstance(Locale(&quot;id&quot;, &quot;ID&quot;))&#10;    return format.format(amount)&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/kotlin/blui/presentation/main/MainScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/kotlin/blui/presentation/main/MainScreen.kt" />
              <option name="originalContent" value="package com.kotlin.blui.presentation.main&#10;&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableIntStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Modifier&#10;import com.kotlin.blui.presentation.component.BottomNavigationBar&#10;import com.kotlin.blui.presentation.home.HomeScreen&#10;import com.kotlin.blui.presentation.profile.ProfileScreen&#10;&#10;@Composable&#10;fun MainScreen(&#10;    onNavigateToTransaction: (String) -&gt; Unit = {},&#10;    onNavigateToDetail: () -&gt; Unit = {},&#10;    onNavigateToLogin: () -&gt; Unit = {}&#10;) {&#10;    var selectedItem by remember { mutableIntStateOf(0) }&#10;&#10;    Scaffold(&#10;        bottomBar = {&#10;            BottomNavigationBar(&#10;                selectedItem = selectedItem,&#10;                onItemSelected = { selectedItem = it },&#10;                onAddTransactionClick = {&#10;                    onNavigateToTransaction(&quot;add&quot;)&#10;                }&#10;            )&#10;        }&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;        ) {&#10;            when (selectedItem) {&#10;                0 -&gt; HomeScreen(&#10;                    onNavigateToTransaction = onNavigateToTransaction,&#10;                    onNavigateToDetail = onNavigateToDetail&#10;                )&#10;                2 -&gt; ProfileScreen(&#10;                    onLogout = onNavigateToLogin&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.kotlin.blui.presentation.main&#10;&#10;import androidx.compose.foundation.layout.Box&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableIntStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.platform.LocalContext&#10;import com.kotlin.blui.presentation.component.BottomNavigationBar&#10;import com.kotlin.blui.presentation.home.HomeScreen&#10;import com.kotlin.blui.presentation.home.HomeScreenViewModel&#10;import com.kotlin.blui.presentation.profile.ProfileScreen&#10;&#10;@Composable&#10;fun MainScreen(&#10;    onNavigateToTransaction: (String) -&gt; Unit = {},&#10;    onNavigateToDetail: () -&gt; Unit = {},&#10;    onNavigateToLogin: () -&gt; Unit = {}&#10;) {&#10;    var selectedItem by remember { mutableIntStateOf(0) }&#10;    val context = LocalContext.current&#10;    val homeViewModel = remember { HomeScreenViewModel(context) }&#10;&#10;    Scaffold(&#10;        bottomBar = {&#10;            BottomNavigationBar(&#10;                selectedItem = selectedItem,&#10;                onItemSelected = { selectedItem = it },&#10;                onAddTransactionClick = {&#10;                    onNavigateToTransaction(&quot;add&quot;)&#10;                }&#10;            )&#10;        }&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;        ) {&#10;            when (selectedItem) {&#10;                0 -&gt; HomeScreen(&#10;                    viewModel = homeViewModel,&#10;                    onNavigateToTransaction = { onNavigateToTransaction(&quot;add&quot;) }&#10;                )&#10;                2 -&gt; ProfileScreen(&#10;                    onLogout = onNavigateToLogin&#10;                )&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>
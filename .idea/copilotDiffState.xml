<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/kotlin/blui/data/api/TokenManager.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/kotlin/blui/data/api/TokenManager.kt" />
              <option name="originalContent" value="package com.kotlin.blui.data.api&#10;&#10;import android.content.Context&#10;import android.content.SharedPreferences&#10;&#10;/**&#10; * TokenManager untuk menyimpan dan mengambil JWT token&#10; * Menggunakan SharedPreferences untuk persistent storage&#10; */&#10;class TokenManager(context: Context) {&#10;    // Use applicationContext to avoid leaking activity context and ensure consistent prefs&#10;    private val prefs: SharedPreferences = context.applicationContext.getSharedPreferences(&#10;        PREFS_NAME,&#10;        Context.MODE_PRIVATE&#10;    )&#10;&#10;    companion object {&#10;        private const val PREFS_NAME = &quot;blui_prefs&quot;&#10;        private const val KEY_TOKEN = &quot;auth_token&quot;&#10;        private const val KEY_USER_ID = &quot;user_id&quot;&#10;        private const val KEY_USER_NAME = &quot;user_name&quot;&#10;        private const val KEY_USER_EMAIL = &quot;user_email&quot;&#10;        private const val KEY_USER_DOB = &quot;user_dob&quot;&#10;        private const val KEY_IS_LOGGED_IN = &quot;is_logged_in&quot;&#10;&#10;        @Volatile&#10;        private var INSTANCE: TokenManager? = null&#10;&#10;        fun getInstance(context: Context): TokenManager {&#10;            return INSTANCE ?: synchronized(this) {&#10;                INSTANCE ?: TokenManager(context.applicationContext).also { INSTANCE = it }&#10;            }&#10;        }&#10;    }&#10;&#10;    fun saveToken(token: String?) {&#10;        val editor = prefs.edit()&#10;        if (token.isNullOrEmpty()) {&#10;            editor.remove(KEY_TOKEN)&#10;            editor.putBoolean(KEY_IS_LOGGED_IN, false)&#10;            println(&quot;TokenManager: saveToken called with null/empty token -&gt; cleared&quot;)&#10;        } else {&#10;            editor.putString(KEY_TOKEN, token)&#10;            editor.putBoolean(KEY_IS_LOGGED_IN, true)&#10;            val masked = if (token.length &gt; 12) token.substring(0, 12) + &quot;...&quot; else token&#10;            println(&quot;TokenManager: saved token (masked): $masked&quot;)&#10;        }&#10;        editor.apply()&#10;    }&#10;&#10;    fun getToken(): String? {&#10;        return prefs.getString(KEY_TOKEN, null)&#10;    }&#10;&#10;    fun saveUserId(userId: String) {&#10;        prefs.edit().putString(KEY_USER_ID, userId).apply()&#10;    }&#10;&#10;    fun saveUserData(id: String, name: String, email: String, dateOfBirth: String?) {&#10;        val editor = prefs.edit()&#10;        editor.putString(KEY_USER_ID, id)&#10;        editor.putString(KEY_USER_NAME, name)&#10;        editor.putString(KEY_USER_EMAIL, email)&#10;        editor.putString(KEY_USER_DOB, dateOfBirth)&#10;        editor.putBoolean(KEY_IS_LOGGED_IN, true)&#10;        editor.apply()&#10;    }&#10;&#10;    fun getUserId(): String? = prefs.getString(KEY_USER_ID, null)&#10;&#10;    fun getUserName(): String? = prefs.getString(KEY_USER_NAME, null)&#10;&#10;    fun getUserEmail(): String? = prefs.getString(KEY_USER_EMAIL, null)&#10;&#10;    fun getUserDateOfBirth(): String? = prefs.getString(KEY_USER_DOB, null)&#10;&#10;    fun isLoggedIn(): Boolean {&#10;        return prefs.getBoolean(KEY_IS_LOGGED_IN, false) &amp;&amp; !getToken().isNullOrEmpty()&#10;&#10;        fun clearToken() {&#10;            val editor = prefs.edit()&#10;            editor.remove(KEY_TOKEN)&#10;            editor.putBoolean(KEY_IS_LOGGED_IN, false)&#10;            editor.apply()&#10;            println(&quot;TokenManager: clearToken called -&gt; token removed&quot;)&#10;        }&#10;&#10;        fun clearAll() {&#10;            prefs.edit().clear().apply()&#10;            println(&quot;TokenManager: clearAll called -&gt; all prefs cleared&quot;)&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.kotlin.blui.data.api&#10;&#10;import android.content.Context&#10;import android.content.SharedPreferences&#10;&#10;class TokenManager(context: Context) {&#10;    private val prefs: SharedPreferences = context.applicationContext.getSharedPreferences(&#10;        PREFS_NAME,&#10;        Context.MODE_PRIVATE&#10;    )&#10;&#10;    companion object {&#10;        private const val PREFS_NAME = &quot;blui_prefs&quot;&#10;        private const val KEY_TOKEN = &quot;auth_token&quot;&#10;        private const val KEY_USER_ID = &quot;user_id&quot;&#10;        private const val KEY_USER_NAME = &quot;user_name&quot;&#10;        private const val KEY_USER_EMAIL = &quot;user_email&quot;&#10;        private const val KEY_USER_DOB = &quot;user_dob&quot;&#10;        private const val KEY_IS_LOGGED_IN = &quot;is_logged_in&quot;&#10;&#10;        @Volatile&#10;        private var INSTANCE: TokenManager? = null&#10;&#10;        fun getInstance(context: Context): TokenManager {&#10;            return INSTANCE ?: synchronized(this) {&#10;                INSTANCE ?: TokenManager(context.applicationContext).also { INSTANCE = it }&#10;            }&#10;        }&#10;    }&#10;&#10;    fun saveToken(token: String?) {&#10;        val editor = prefs.edit()&#10;        if (token.isNullOrEmpty()) {&#10;            editor.remove(KEY_TOKEN)&#10;            editor.putBoolean(KEY_IS_LOGGED_IN, false)&#10;            println(&quot;TokenManager: saveToken called with null/empty token -&gt; cleared&quot;)&#10;        } else {&#10;            editor.putString(KEY_TOKEN, token)&#10;            editor.putBoolean(KEY_IS_LOGGED_IN, true)&#10;            val masked = if (token.length &gt; 12) token.substring(0, 12) + &quot;...&quot; else token&#10;            println(&quot;TokenManager: saved token (masked): $masked&quot;)&#10;        }&#10;        editor.apply()&#10;    }&#10;&#10;    fun getToken(): String? = prefs.getString(KEY_TOKEN, null)&#10;&#10;    fun saveUserId(userId: String) {&#10;        prefs.edit().putString(KEY_USER_ID, userId).apply()&#10;    }&#10;&#10;    fun saveUserData(id: String, name: String, email: String, dateOfBirth: String?) {&#10;        val editor = prefs.edit()&#10;        editor.putString(KEY_USER_ID, id)&#10;        editor.putString(KEY_USER_NAME, name)&#10;        editor.putString(KEY_USER_EMAIL, email)&#10;        editor.putString(KEY_USER_DOB, dateOfBirth)&#10;        editor.putBoolean(KEY_IS_LOGGED_IN, true)&#10;        editor.apply()&#10;    }&#10;&#10;    fun getUserId(): String? = prefs.getString(KEY_USER_ID, null)&#10;&#10;    fun getUserName(): String? = prefs.getString(KEY_USER_NAME, null)&#10;&#10;    fun getUserEmail(): String? = prefs.getString(KEY_USER_EMAIL, null)&#10;&#10;    fun getUserDateOfBirth(): String? = prefs.getString(KEY_USER_DOB, null)&#10;&#10;    fun isLoggedIn(): Boolean {&#10;        return prefs.getBoolean(KEY_IS_LOGGED_IN, false) &amp;&amp; !getToken().isNullOrEmpty()&#10;    }&#10;&#10;    fun clearToken() {&#10;        val editor = prefs.edit()&#10;        editor.remove(KEY_TOKEN)&#10;        editor.putBoolean(KEY_IS_LOGGED_IN, false)&#10;        editor.apply()&#10;        println(&quot;TokenManager: clearToken called -&gt; token removed&quot;)&#10;    }&#10;&#10;    fun clearAll() {&#10;        prefs.edit().clear().apply()&#10;        println(&quot;TokenManager: clearAll called -&gt; all prefs cleared&quot;)&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>